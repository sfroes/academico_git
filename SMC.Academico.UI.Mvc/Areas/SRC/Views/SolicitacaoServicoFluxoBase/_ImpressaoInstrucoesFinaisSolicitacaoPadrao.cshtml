@using SMC.Academico.UI.Mvc.Areas.SRC.Models.SolicitacaoServico
@using SMC.Academico.UI.Mvc
@model ImpressaoSolicitacaoPadraoViewModel

@*@{
        Layout = "~/Views/Shared/_LayoutFluxo.cshtml";
    }

    @section MenuFluxo {
        @Html.Action("MenuFluxo", Model)
    }*@

@*@(Smc.SGFTemplate().Secao().Token(TOKEN_SOLICITACAO_SERVICO.SECAO_TEXTO_INSTRUCOES_FINAIS))

    @(Smc.SGFTemplate().Secao().Token(TOKEN_SOLICITACAO_SERVICO.SECAO_ARQUIVO_INSTRUCOES_FINAIS))*@
@{ 
    Layout = null;
}
<html>
<head>
    <meta charset="UTF-8">
    <title>@ViewBag.Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="E:/Aplicativos/Recursos/Academico/4.0/Content/Css/smc-impressao.css" />
    @*<link rel="stylesheet" type="text/css" href="D:/SMC/Academico/SMC.Academico.Recursos/Content/Css/smc-impressao.css" />*@
    @*<link rel="stylesheet" type="text/css" href="http://localhost/Recursos/Academico/4.0/Content/Css/smc-impressao.css" />*@
</head>
                        <body>
                            <div class="logo">
                                <div class="logo-img">
                                @if (Model.LogoInstituicao != null)
                                {
                                    <img src="data:image/png;base64,@Convert.ToBase64String(Model.LogoInstituicao)" />
                                }
                                </div>
                                <div class="logo-nome">@Model.NomeInstituicao.ToUpper()</div>
                                <h1>@Model.DescricaoProcessoImprimir.ToUpper()</h1>
                            </div>
                             @using (Smc.Fieldset("fsDadosPessoaAtuacao").Size(SMCSize.Grid24_24).CssClass("smc-sga-confirmacao-dados").LegendText("Dados do solicitante").Begin())
                            {
                                @Smc.DisplayFor(x => x.RASolicitante).Size(SMCSize.Grid5_24, SMCSize.Grid5_24, SMCSize.Grid5_24, SMCSize.Grid5_24);
                                @Smc.DisplayFor(x => x.NomeSolicitante).Size(SMCSize.Grid19_24, SMCSize.Grid19_24, SMCSize.Grid19_24, SMCSize.Grid19_24);
                            }

                            @using (Smc.Fieldset("fsDadosSolicitacao").Size(SMCSize.Grid24_24).CssClass("smc-sga-confirmacao-dados").LegendText("Dados do processo").Begin())
                            {
                                @Smc.DisplayFor(x => x.Protocolo).Size(SMCSize.Grid3_24, SMCSize.Grid3_24, SMCSize.Grid3_24, SMCSize.Grid3_24);
                                @Smc.DisplayFor(x => x.DescricaoProcessoImprimir).Size(SMCSize.Grid19_24, SMCSize.Grid19_24, SMCSize.Grid19_24, SMCSize.Grid19_24);
                                @Smc.DisplayFor(x => x.DescricaoEtapa).Size(SMCSize.Grid24_24, SMCSize.Grid24_24, SMCSize.Grid24_24, SMCSize.Grid24_24);
                            }

                            @using (Smc.Fieldset("fsSolicitacao").Size(SMCSize.Grid24_24).CssClass("smc-sga-confirmacao-dados").LegendText("Solicitação").Begin())
                            {
                                @Smc.DisplayFor(x => x.SituacaoAtualSolicitacao).Size(SMCSize.Grid12_24);

                                @Smc.DisplayFor(x => x.DescricaoOriginal).CssClass("smc-sga-desc-atual").Size(SMCSize.Grid24_24);

                                if (!string.IsNullOrEmpty(Model.DescricaoAtualizada))
                                {
                                    @Smc.DisplayFor(x => x.DescricaoAtualizada).CssClass("smc-sga-desc-atual").Size(SMCSize.Grid24_24);
                                }
                            }

                            @if (Model.ExigeJustificativa)
                            {
                                using (Smc.Fieldset("fsJustificativa").Size(SMCSize.Grid24_24).CssClass("smc-sga-confirmacao-dados").LegendText("Justificativa").Begin())
                                {
                                    @Smc.DisplayFor(x => x.DescricaoJustificativa).Size(SMCSize.Grid24_24)
                                    @Smc.DisplayFor(x => x.ObservacoesJustificativa).Size(SMCSize.Grid24_24)
                                }
                            }

                            @if (Model.ExigeFormulario)
                            {
                                foreach (var item in Model.DadoFormulario)
                                {
                                    var nomeFormulario = Model.NomesFormularios.FirstOrDefault(x => x.Key == item.SeqFormulario).Value;

                                    using (Smc.Fieldset("fsFormulario_" + item.SeqFormulario).Size(SMCSize.Grid24_24).CssClass("smc-sga-confirmacao-dados").LegendText(nomeFormulario).Begin())
                                    {
                                        var viewFrm = Smc.GetExternalView(AcademicoExternalViews.IMPRESSAO_SOLICITACAO_PADRAO_FORMULARIO);
                                        @Html.Partial(viewFrm, item)
                                    }
                                }
                            }

                            @if (Model.Documentos != null && Model.Documentos.Any())
                            {
                                using (Smc.Fieldset("fsDocumento").Size(SMCSize.Grid24_24).CssClass("smc-sga-confirmacao-dados").LegendText("Documentos").Begin())
                                {
                                    @(Smc.Grid("gridDocumentos_" + Guid.NewGuid().ToString(), new SMCPagerModel<ImpressaoSolicitacaoPadraoDocumentoViewModel>(Model.Documentos))
                                                                                                                                .HideGridTitle()
                                                                                                                                .Size(SMCSize.Grid24_24)
                                                                                                                                .AutoHideNavigator()
                                                                                                                                .HideNavigator()
                                                                                                                                .HideNumberOfRowsPerPageSelector()
                                                                                                                                .HidePager()
                                                                                                                                .CssClass("smc-print-grid")
                                                                                                                                .HideRowsTotalizer()
                                                                                                                                .FieldColumn(x => x.DescricaoTipoDocumento)
                                                                                                                                .FieldColumn(x => x.Observacao))
                                }
                            }
                        </body>
                            </html>
