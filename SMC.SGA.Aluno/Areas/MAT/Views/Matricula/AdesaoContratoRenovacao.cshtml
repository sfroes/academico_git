@model PaginaAdesaoContratoRenovacaoMatriculaViewModel

@section MenuLateral {
	@Html.Action("MenuPaginas", Model)
}

@(Smc.SGFTemplate().Secao().Token(MatriculaTokens.PAGINA_ADESAO_CONTRATO_MATRICULA_INSTRUCOES))

@using (Smc.Form("frmPagina").CssClass("smc-sga-confirmacao-dados").Ajax().Begin())
{
	using (Smc.Fieldset("fsDadosIngressante").Begin())
	{
		@Smc.DisplayFor(x => x.Nome).Size(SMCSize.Grid8_24)
		@Smc.DisplayFor(x => x.RG).Size(SMCSize.Grid3_24)
		@Smc.DisplayFor(x => x.CPF).Size(SMCSize.Grid3_24)
		@Smc.DisplayFor(x => x.Passaporte).Size(SMCSize.Grid4_24)
		@Smc.DisplayFor(x => x.ResponsavelFinanceiro).Size(SMCSize.Grid6_24)
	}

	using (Smc.Fieldset("fsInformacoesAcademicas").Begin())
	{
		@Smc.DisplayFor(x => x.EntidadeResponsavel).Size(SMCSize.Grid12_24)
		@Smc.DisplayFor(x => x.OfertaCurso).Size(SMCSize.Grid12_24)
		@Smc.DisplayFor(x => x.Modalidade).Size(SMCSize.Grid6_24)
		@Smc.DisplayFor(x => x.PrazoConclusaoMeses).Size(SMCSize.Grid6_24)
		@Smc.DisplayFor(x => x.Inicio).Size(SMCSize.Grid6_24)
		@Smc.DisplayFor(x => x.TerminoPrevisto).Size(SMCSize.Grid6_24)

		if (!string.IsNullOrWhiteSpace(Model.Servicos))
		{
			@Smc.DisplayFor(x => x.Servicos).Size(SMCSize.Grid12_24)
			@Smc.DisplayFor(x => x.DataInicioServico).Size(SMCSize.Grid6_24)
			@Smc.DisplayFor(x => x.DataFimServico).Size(SMCSize.Grid6_24)
		}
	}

	if (Model.InformacoesFinanceiras != null && Model.InformacoesFinanceiras.Any())
	{
		using (Smc.Fieldset("fsInformacoesFinanceiras").Begin())
		{
			@(Smc.Grid("gridInformacoesFinanceiras", new SMCPagerModel<InformacaoFinanceiraTermoAcademicoViewModel>(Model.InformacoesFinanceiras))
								.HideGridTitle()
								.AutoHideNavigator()
								.HideNavigator()
								.HideNumberOfRowsPerPageSelector()
								.HidePager()
								.HideRowNumber()
								.HideRowsTotalizer()
								.FieldColumn(x => x.DescricaoServico)
								.FieldColumn(x => x.QuantidadeParcelas)
								.FieldColumn(x => x.ValorParcela)
                                .FieldColumn(x => x.DataInicioParcela)
								.FieldColumn(x => x.DiaVencimentoParcelas))

			if (Model.InformacoesBeneficios != null && Model.InformacoesBeneficios.Any())
			{
				@*@(Smc.List("Beneficios", Model.InformacoesBeneficios).HtmlTemplate(@<text>
						@Html.Partial("_AdesaoContratoBeneficios", item)
				</text>))*@
				@Html.Partial("_AdesaoContratoBeneficios", Model.InformacoesBeneficios)
			}
		}

		using (Smc.Div().Size(SMCSize.Grid24_24).CssClass("smc-sga-mensagem smc-sga-mensagem-informativa").Begin())
		{
			<p>@Smc.GetUIResource("Mensagem_Informacoes_Financeiras")</p>
		}
	}
	else
	{
		using (Smc.Div().Size(SMCSize.Grid24_24).CssClass("smc-sga-mensagem smc-sga-mensagem-informativa smc-sga-margin-top-5").Begin())
		{
			<p class="smc-sga-msg-conteudo-linha">@Smc.GetUIResource("Mensagem_Informacoes_Sem_Debitos_Financeiros")</p>
		}
	}

	using (Smc.Div("divAdesao").Begin())
	{

		using (Smc.Fieldset("fsTermoAdesao").Begin())
		{
			<span class="smc-sga-termo-conteudo smc-size-md-24 smc-size-xs-24 smc-size-sm-24 smc-size-lg-24">@Model.TermoAdesao</span>
			@Smc.ButtonSet().Type(SMCButtonSetType.Secondary).Size(SMCSize.Grid4_24).CssClass("smc-sga-botao-aceite").AddButton(
					  Smc.Button("VisualizarContrato", "AdesaoContratoVisualizar", new { seqArquivoContrato = new SMCEncryptedLong(Model.SeqArquivoContrato) })
							.Attribute("target", "_blank")
							.Type(SMCButtonType.Link)
							.CssClass("smc-btn-documento-icotext"))
			@Smc.EditorFor(x => x.AceitoTermo).CssClass("smc-sga-check-aceite")
		}
	}

	// Desabilita o botão próximo para atender à regra de negócio NV04
	@section scripts
    {
		<script type="text/javascript">
			var aderiuTermo = false;

			function liberarBotao() {
				if (aderiuTermo) {
					$('#proximaPagina').closest(".smc-button ").removeClass("smc-btn-disabled");
					$('#proximaPagina').removeAttr('disabled');
					$('#proximaPagina').closest('div').find('[data-type="smc-instructions"]').hide();
				}
				else {
					$('#proximaPagina').closest(".smc-button ").addClass("smc-btn-disabled");
					$("#proximaPagina").attr("disabled", "disabled");
					$('#proximaPagina').closest('div').find('[data-type="smc-instructions"]').show();
				}
			}

			$("[name='AceitoTermo']").on("change.adesao", function () {
				aderiuTermo = $(this).is(":checked");
				liberarBotao();
			});

			liberarBotao();

		</script>
	}

	@Smc.HtmlHelper.Partial("_BotoesNavegacao", Model);
}
