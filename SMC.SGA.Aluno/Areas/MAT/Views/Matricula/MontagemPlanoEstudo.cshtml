@using SMC.Academico.Common.Areas.MAT.Enums;
@model MontagemPlanoEstudosViewModel

@section MenuLateral
{
    @Html.Action("MenuPaginas", Model)
}

@(Smc.SGFTemplate().Secao().Token(MatriculaTokens.PAGINA_MONTAGEM_PLANO_ESTUDOS_INSTRUCOES))

@using (Smc.Div().Size(SMCSize.Grid24_24).Begin())
{
    var buttonSetSelecao = Smc.ButtonSet().Size(SMCSize.Grid24_24);

    buttonSetSelecao.AddButton(Smc.Button(SMCMvcConsts.MODAL_BEHAVIOR_OPEN)
         .Action("PlanoEstudoPesquisarTurma", "SelecaoTurmaRoute", new
         {
            @seqSolicitacaoMatricula = Model.SeqSolicitacaoMatricula,
            @backUrl = Model.backUrl,
            @area = string.Empty
         })
         .Ajax(isPost: false)
         .SecurityToken(UC_MAT_003_09_01.SELECIONAR_TURMAS)
         .Attribute(SMCMvcConsts.MODAL_ID, "modalSelecionarTurmaPlanoEstudo")
         .Attribute(SMCMvcConsts.MODAL_TITLE, Smc.GetUIResource("Modal_Title_Selecionar_Turma"))
         .Text(Smc.GetUIResource("Label_Selecionar_Turma"))
         .Tooltip(Smc.GetUIResource("Label_Selecionar_Turma")));

    @buttonSetSelecao;
}

@using (Smc.Fieldset("divSelecaoTurmaOferta").LegendText(@Smc.GetUIResource("TurmaMatrizSelecionada_Lista_Titulo")).Size(SMCSize.Grid24_24).Begin())
{


    if (Model.DivisaoTurmas != null && Model.DivisaoTurmas.Count > 0)
    {
        using (Smc.Div("divLegenda").Size(SMCSize.Grid24_24, SMCSize.Grid24_24, SMCSize.Grid24_24, SMCSize.Grid24_24).Begin())
        {
            using (Smc.Div("PertenceCurriculo").CssClass("smc-sga-plano-legend").Size(SMCSize.Grid8_24).Begin())
            {
                <p class="smc-sga-titulo-legenda"> @Smc.GetUIResource("Titulo_Legenda_TurmaOfertaMatricula")</p>
                @(Smc.Legend("PertenceCurriculo", SMCOrientation.Horizontal).Items<TurmaOfertaMatricula>())
            }
        }

        @(Smc.List("SelectedValues", Model.DivisaoTurmas).HtmlTemplate(@<text>@Html.Partial("_SelecaoPlanoEstudoItem", item)</text>))
    }
    else
    {
        using (Smc.Div().CssClass("smc-list-group-no-results").Size(SMCSize.Grid24_24).Begin())
        {
            <p>@Smc.GetUIResource("Label_Nenhum_Registro_Turma_Selecionada")</p>
        }
    }
}

@using (Smc.Form("frmPagina").Ajax().Begin())
{
    @Html.Partial("_BotoesNavegacao", Model)
}

@using (Smc.ModalWindow("modalSelecionarTurmaPlanoEstudo")
           .Form("frmModalPlanoEstudoSelecaoTurma", "PlanoEstudoSalvarSelecaoTurma", "SelecaoTurmaRoute", new { area = string.Empty }, closeOnSubmit: true, config: x => x.Ajax())
           .Size(SMCModalWindowSize.Largest)
           .Button(SMCButtonBehavior.Salvar, "PlanoEstudoSalvarSelecaoTurma", "SelecaoTurmaRoute", new { area = string.Empty }, config: bnt => bnt.DisplayMode(SMCButtonDisplayMode.TextAndIcon).Highlight())
           .Button(SMCButtonBehavior.Fechar, config: bnt => bnt.DisplayMode(SMCButtonDisplayMode.TextAndIcon))
           .Begin()) { }