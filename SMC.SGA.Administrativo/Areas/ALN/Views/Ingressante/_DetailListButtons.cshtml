@model IngressanteListarDynamicModel
@using SMC.Academico.Common.Areas.FIN.Constants

@{
    // ASSOCIAR FORMAÇÃO ESPECÍFICA
    SMCButtonFluentConfiguration buttonAssociacaoFormacaoEspecificaIngressante = Smc.Button("AssociacaoFormacaoEspecificaIngressante", "AssociacaoFormacaoEspecificaIngressante", new { SeqIngressante = new SMCEncryptedLong(Model.Seq) }, "Ingressante")
                            .Text(Smc.GetUIResource("Botao_AssociacaoFormacaoEspecificaIngressante"))
                            .Type(SMCButtonType.Link)
                            .Tooltip(Smc.GetUIResource("Botao_AssociacaoFormacaoEspecificaIngressante_Tooltip"))
                            .SecurityToken(UC_ALN_002_03_02.ASSOCIAR_FORMACAO_ESPECIFICA);

    if (Model.PossuiSituacaoImpeditivaIngressante)
    {
        buttonAssociacaoFormacaoEspecificaIngressante
            .Confirm(Smc.GetUIResource("Title_Visualizacao"), Smc.GetUIResource("MSG_Visualizacao_Situacao"));
    }
    if (Model.NaoExigeOfertaMatrizCurricular)
    {
        buttonAssociacaoFormacaoEspecificaIngressante.Enabled(false)
            .ButtonInstructions(Smc.GetUIResource("ButtonInstructions_PossuiVinculoAssociacaoFormacaoEspecifica"));
    }


    // ASSOCIAR ORIENTAÇÃO
    SMCButtonFluentConfiguration buttonAssociacaoOrientadorIngressante = Smc.Button("AssociacaoOrientadorIngressante", "AssociacaoOrientadorIngressante", new { SeqIngressante = new SMCEncryptedLong(Model.Seq), SeqNivelEnsino = new SMCEncryptedLong(Model.SeqNivelEnsino) }, "Ingressante")
                            .Text(Smc.GetUIResource("Botao_AssociacaoOrientadorIngressante"))
                            .Type(SMCButtonType.Link)
                            .Tooltip(Smc.GetUIResource("Botao_AssociacaoOrientadorIngressante_Tooltip"))
                            .SecurityToken(UC_ALN_002_03_03.ASSOCIAR_ORIENTADOR);

    if (Model.PossuiSituacaoImpeditivaIngressante)
    {
        buttonAssociacaoOrientadorIngressante
            .Confirm(Smc.GetUIResource("Title_Visualizacao"), Smc.GetUIResource("MSG_Visualizacao_Situacao"));
    }
    if (Model.NaoPossuiVinculoAssociacaoOrientador)
    {
        buttonAssociacaoOrientadorIngressante.Enabled(false)
            .ButtonInstructions(Smc.GetUIResource("ButtonInstructions_PossuiVinculoAssociacaoOrientador"));
    }
    else if (Model.NaoPermiteAssociacaoOrientador)
    {
        buttonAssociacaoOrientadorIngressante.Enabled(false)
        .ButtonInstructions(Smc.GetUIResource("ButtonInstructions_NaoPermiteAssociacaoOrientador"));
    }


    // ASSOCIAR CONDIÇÃO DE OBRIGATORIEDADE
    SMCButtonFluentConfiguration buttonPessoaAtuacaoCondicaoObrigatoriedade = Smc.Button(SMCMvcConsts.MODAL_BEHAVIOR_OPEN)
        .Attribute(SMCMvcConsts.MODAL_ID, SMCMvcConsts.SMC_VIEWPADRAO_MODAL_ID_EDIT)
        .Attribute(SMCMvcConsts.MODAL_SUBMIT_URL, Url.Action("Salvar", "PessoaAtuacaoCondicaoObrigatoriedade", new { @backUrl = Url.Action("Index", "Ingressante") }))
        .Attribute(SMCMvcConsts.MODAL_TITLE, Smc.GetUIResource("Title_PessoaAtuacaoCondicaoObrigatoriedade"))
        .Ajax(isPost: false)
        .Text(Smc.GetUIResource("Botao_PessoaAtuacaoCondicaoObrigatoriedade"))
        .Tooltip(Smc.GetUIResource("Botao_PessoaAtuacaoCondicaoObrigatoriedade"))
        .Type(SMCButtonType.InputButton).CssClass("smc-btn-custom-destaque")
        .SecurityToken(UC_ALN_002_08_01.ASSOCIAR_CONDICAO_OBRIGATORIEDADE)
        .Action("Incluir", "PessoaAtuacaoCondicaoObrigatoriedade", new { seqPessoaAtuacao = new SMCEncryptedLong(Model.Seq), area = "PES" });

    if (Model.PossuiSituacaoImpeditivaIngressante)
    {
        buttonPessoaAtuacaoCondicaoObrigatoriedade
            .Confirm(Smc.GetUIResource("Title_Visualizacao"), Smc.GetUIResource("MSG_Visualizacao_Situacao"));
    }
    if (Model.NaoExigeOfertaMatrizCurricular)
    {
        buttonPessoaAtuacaoCondicaoObrigatoriedade.Enabled(false)
            .ButtonInstructions(Smc.GetUIResource("ButtonInstructions_CondicaoObrigatoriedade"));
    }


    // LIBERAÇÃO DE MATRÍCULA
    SMCButtonFluentConfiguration buttonLiberacaoMatriculaIngressante = Smc.Button("LiberacaoMatriculaIngressante", "LiberarMatricula", new { Seq = new SMCEncryptedLong(Model.Seq) }, "Ingressante")
        .Text(Smc.GetUIResource("Botao_LiberacaoMatriculaIngressante"))
        .Type(SMCButtonType.Link)
        .Tooltip(Smc.GetUIResource("Botao_LiberacaoMatriculaIngressante"))
        .SecurityToken(UC_ALN_002_01_02.MANTER_INGRESSANTE)
        .Hide(!Model.ExibirLiberacaoMaricula)
        .Confirm(Smc.GetUIResource("Title_Liberacao"), Smc.GetUIResource("MSG_Liberacao"));

    if (!Model.PermitirLiberacaoMatricula)
    {
        buttonLiberacaoMatriculaIngressante
            .Enabled(false)
            .ButtonInstructions(Smc.GetUIResource("ButtonInstructions_LiberacaoMatriculaIngressante"));
    }

    // ASSOCIAÇÃO DE BENEFÍCIO
    SMCButtonFluentConfiguration buttonAssociacaoBenificio = Smc.Button(SMCButtonBehavior.Visualizar)
                        .Action("Index", "PessoaAtuacaoBeneficio", new { seqPessoaAtuacao = new SMCEncryptedLong(Model.Seq), Area = "FIN" })
                        .Text(Smc.GetUIResource("Botao_AssociacaoBenificio"))
                        .Type(SMCButtonType.Link)
                        .Tooltip(Smc.GetUIResource("Botao_AssociacaoBenificio_Tooltip"))
                        .SecurityToken(UC_FIN_001_03_01.PESQUISAR_ASSOCIACAO_BENEFICIO_PESSOA_ATUACAO);


    if (!Model.VinculoInstituicaoNivelEnsinoExigeCurso)
    {
        buttonAssociacaoBenificio.Enabled(false);
        buttonAssociacaoBenificio.ButtonInstructions(Smc.GetUIResource("ButtonInstructions_NaoPermiteAssociarBeneficioExigeCurso"));
    }
}

@(Smc.Templates.DetailedListButtons()
        .AllowEdit(Smc.GetUIResource("Title_Visualizacao"), Model.MensagemEdicao, displayConfirmMessage: Model.NaoPermiteEdicao || Model.ConfirmacaoEdicao)
        .UrlEdit(new UrlHelper(Request.RequestContext).Action(Model.NaoPermiteEdicao ? "Visualizar" : "Editar", new { seq = new SMCEncryptedLong(Model.Seq) }))
        .AddButton(buttonAssociacaoBenificio)
        .AddButton(buttonPessoaAtuacaoCondicaoObrigatoriedade)
        .AddButton(buttonAssociacaoFormacaoEspecificaIngressante)
        .AddButton(buttonAssociacaoOrientadorIngressante)
        .AddButton(buttonLiberacaoMatriculaIngressante)
        .Size(SMCSize.Grid1_24, SMCSize.Grid2_24, SMCSize.Grid2_24, SMCSize.Grid1_24))