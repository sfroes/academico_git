@using SMC.Academico.Common.Areas.SRC.Enums
@using SMC.SGA.Administrativo.Areas.SRC.Views.SolicitacaoServico.App_LocalResources
@using SMC.Academico.Common.Areas.MAT.Constants
@using SMC.Academico.Common.Areas.ALN.Constants

@model DadosSolicitacaoViewModel

@if (Model.ExibirBotoesSolicitacao)
{
    @(Smc.ButtonSet()
        .NumberOfButtonsToShow(1, SMCButtonSetGroupedStyle.Button, "GerarBotoesSolicitacao", "SolicitacaoServico", new { @seqSolicitacaoServico = Model.SeqSolicitacaoServico }, false)
        .Type(SMCButtonSetType.Primary))
}

@Smc.DisplayFor(x => x.SeqSolicitacaoServico)
@Smc.DisplayFor(x => x.SeqPessoaAtuacao)
@Smc.DisplayFor(x => x.SeqConfiguracaoEtapa)

@using (Smc.TabSet("ConsultarSolicitacao").Begin())
{
    using (Smc.Tab("Identificacao").Action("BuscarDadosIdentificacaoSolicitante", "SolicitacaoServico", new { SeqSolicitacaoServico = new SMCEncryptedLong(Model.SeqSolicitacaoServico) }).Begin())
    {

    }

    using (Smc.Tab("HistoricosSolicitacao").Action("BuscarHistoricosSolicitacao", "SolicitacaoServico", new { SeqSolicitacaoServico = new SMCEncryptedLong(Model.SeqSolicitacaoServico), SeqPessoaAtuacao = new SMCEncryptedLong(Model.SeqPessoaAtuacao), BackUrl = Model.BackUrl }).Begin())
    {

    }

    using (Smc.Tab("NotificacoesSolicitacao").Action("BuscarNotificacoesSolicitacao", "SolicitacaoServico", new { SeqSolicitacaoServico = new SMCEncryptedLong(Model.SeqSolicitacaoServico) }).Begin())
    {

    }

    using (Smc.Tab("DocumentosSolicitacao").Action("BuscarDocumentosSolicitacao", "SolicitacaoServico", new { SeqSolicitacaoServico = new SMCEncryptedLong(Model.SeqSolicitacaoServico), SeqPessoaAtuacao = new SMCEncryptedLong(Model.SeqPessoaAtuacao) }).Begin())
    {

    }

    if (Model.SolicitacaoPossuiTaxas)
    {
        using (Smc.Tab("TaxasSolicitacao").Action("BuscarTaxasSolicitacao", "SolicitacaoServico", new { SeqSolicitacaoServico = new SMCEncryptedLong(Model.SeqSolicitacaoServico), SeqServico = new SMCEncryptedLong(Model.SeqServico), BackUrl = Model.BackUrl }).Begin())
        {

        }
    }
}

@{
    if (Model.ExibirBotoesSolicitacao)
    {
        var buttonSet2 = Smc.ButtonSet();

        buttonSet2.AddButton(Smc.Button(SMCButtonBehavior.Voltar).DisplayMode(SMCButtonDisplayMode.TextAndIcon).Action("Index", "SolicitacaoServico"));

        @buttonSet2;
    }
}

@using (Smc.ModalWindow("modalRegistrarDocumentos")
        .Form("frmRegistrar", "SalvarRegistroDocumentos", "RegistroDocumentosItemRoute", new { area = string.Empty }, closeOnSubmit: true, config: x => x.Ajax())
        .Size(SMCModalWindowSize.Largest)
        .Button(SMCButtonBehavior.Salvar, "SalvarRegistroDocumentos", "RegistroDocumentosItemRoute", new { area = string.Empty }, config: bnt => bnt.DisplayMode(SMCButtonDisplayMode.TextAndIcon).Highlight())
        .Button(SMCButtonBehavior.Fechar, config: bnt => bnt.DisplayMode(SMCButtonDisplayMode.TextAndIcon))
        .SecurityToken(UC_SRC_004_02_01.REGISTRAR_DOCUMENTOS)
        .Begin()) { }

@using (Smc.ModalWindow("modalCancelarSolicitacao")
        .Form("frmCancelar", "SalvarCancelamentoSolicitacao", "SolicitacaoServico", new { area = "SRC" }, closeOnSubmit: true, config: x => x.Ajax())
        .Size(SMCModalWindowSize.Large)
        .Button(SMCButtonBehavior.Salvar, "SalvarCancelamentoSolicitacao", "SolicitacaoServico", new { area = string.Empty }, config: bnt => bnt.DisplayMode(SMCButtonDisplayMode.TextAndIcon).Highlight())
        .Button(SMCButtonBehavior.Fechar, config: bnt => bnt.DisplayMode(SMCButtonDisplayMode.TextAndIcon))
        .SecurityToken(UC_SRC_004_01_08.CANCELAR_SOLICITACAO)
        .Begin()) { }

@using (Smc.ModalWindow("modalReabrirSolicitacao")
        .Form("frmReabrir", "SalvarReaberturaSolicitacao", "SolicitacaoServico", new { area = "SRC" }, closeOnSubmit: true, config: x => x.Ajax())//, config: x => x.Ajax())
        .Size(SMCModalWindowSize.Large)
        .Button(SMCButtonBehavior.Salvar, "SalvarReaberturaSolicitacao", "SolicitacaoServico", new { area = string.Empty }, config: bnt => bnt.DisplayMode(SMCButtonDisplayMode.TextAndIcon).Highlight())
        .Button(SMCButtonBehavior.Fechar, config: bnt => bnt.DisplayMode(SMCButtonDisplayMode.TextAndIcon))
        .SecurityToken(UC_SRC_004_01_09.REABRIR_SOLICITACAO)
        .Begin()) { }

@using (Smc.ModalWindow("modalVisualizarPlanoEstudo")
        .Size(SMCModalWindowSize.Largest)
        .Button(SMCButtonBehavior.Fechar, config: bnt => bnt.DisplayMode(SMCButtonDisplayMode.TextAndIcon))
        .SecurityToken(UC_MAT_003_20_01.VISUALIZAR_ITENS_PLANO_ESTUDO)
        .Begin()) { }

@using (Smc.ModalWindow("modalDiploma")
           .Form("formDiploma", closeOnSubmit: true)
           .Size(SMCModalWindowSize.Largest)
           .Button(SMCButtonBehavior.Fechar, config: bnt => bnt.DisplayMode(SMCButtonDisplayMode.TextAndIcon))
           .Begin()) { }
