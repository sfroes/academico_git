@model ConfigurarVagasOfertaCampanhaViewModel

@Html.Action("CabecalhoCampanhaOferta", Model.SeqCampanha)

@using (Smc.Form("formConfigurarOfertaCampanha").Ajax().Begin())
{
    @Smc.EditorFor(m => m.SeqCampanha)
    @Smc.EditorFor(m => m.ProcessosSeletivosTree)

    @(Smc.Grid("gridListarConfigurarVagas", new SMCPagerModel<ConfigurarVagasOfertaCampanhaListaViewModel>(Model.CampanhaOfertas))
                            .HideNavigator()
                            .HidePager()
                            .HideRowNumber()
                            .HideRowsTotalizer()
                            .HideGridTitle()
                            .Attribute("data-detail-property", SMCLookupHelper.GetCurrentPropertyName(Smc))
                            .FieldColumn(x => x.TipoOfertaDisplay)
                            .FieldColumn(x => x.OfertaDisplay)
                            .ContentColumn(@<text>
                                @{
                                                    ViewBag.Index = (ViewBag.Index != null) ? ((int)ViewBag.Index) + 1 : 0;
                                }
                                @Html.Partial("_CustomVagasItem", item as ConfigurarVagasOfertaCampanhaListaViewModel)
                            </text>, @Smc.GetUIResource("ConfigurarVagasOfertaCampanha_Vagas")))


    if (Model.ProcessosSeletivos != null && Model.ProcessosSeletivos.Count > 0)
    {
        using (Smc.Div("divProcessosSeletivo")
                  .ConditionalDisplay("CampanhaOfertas", SMCConditionalOperation.NotEqual, requiredValue: null)
                .Begin())
        {
            @Smc.DisplayFor(m => m.MensagemAlertaProcessoSeletivo).HideLabel()

            @Smc.TreeView("ProcessosSelecionados", Model.ProcessosSeletivosTree).Expanded(true).AllowCheck(SMCSelectMode.Checkbox)
        }
    }

    @(Smc.ButtonSet()
                .AddButton(Smc.Button(SMCButtonBehavior.Salvar).CssClass("smc-btn-salvar-icotext-destaque")
                        .Text(Smc.GetUIResource("Botao_Salvar_Vagas_Campanha_Oferta"))
                        .Tooltip(Smc.GetUIResource("Botao_Salvar_Vagas_Campanha_Oferta_Tooltip"))
                        .Conditional(SMCConditionalBehavior.ReadOnly, "OfertasCampanha", SMCConditionalOperation.Equals, null)
                        .Action("SalvarVagasCampanhaOferta", "CampanhaOferta")
                        .Type(SMCButtonType.Submit))                
                .AddButton(Smc.Button(SMCButtonBehavior.Voltar).CssClass("smc-btn-voltar-icotext")
                        .Action("Index", "CampanhaOferta", new { seqCampanha = (SMCEncryptedLong)Model.SeqCampanha }, forceForBackBehavior: true)
                        .Type(SMCButtonType.Link))
    )
}