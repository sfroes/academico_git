@model ProcessoSeletivoOfertaFiltroViewModel

@Html.Action("CabecalhoProcessoSeletivoOferta", Model.SeqProcessoSeletivo)


@using (Smc.Form("formPesquisaOferta", "ListarOfertasProcessoSeletivo").Ajax("#divGridProcessoSeletivoOferta").Begin())
{
    using (Smc.Fieldset("filtroOferta").CssClass("smc-fieldset-filter").Begin())
    {
        @Smc.HiddenFor(m => m.SeqCampanha)
        @Smc.HiddenFor(m => m.SeqProcessoSeletivo)
        @Smc.EditorFor(m => m.SeqTipoOferta)
        @Smc.EditorFor(m => m.Oferta)

        @(Smc.ButtonSet().Size(SMCSize.Grid24_24)
                    .AddButton(Smc.Button(SMCButtonBehavior.Pesquisar).DisplayMode(SMCButtonDisplayMode.TextAndIcon).Highlight())
                    .AddButton(Smc.Button(SMCButtonBehavior.LimparEnviar).DisplayMode(SMCButtonDisplayMode.Icon))
                    .AddButton(Smc.Button(SMCButtonBehavior.Novo)
                            .DisplayMode(SMCButtonDisplayMode.TextAndIcon)
                            .Type(SMCButtonType.Link)
                            .SecurityToken(UC_CAM_001_01_04.ASSOCIAR_OFERTA_CAMPANHA)
                            .Url(Url.Action("Incluir", new
                            {
                                seqProcessoSeletivo = (SMCEncryptedLong)Model.SeqProcessoSeletivo,
                                seqCampanha = (SMCEncryptedLong)Model.SeqCampanha
                            })))
        )
    }
}

@using (Smc.Form("formOferta", "ConfigurarVagas").Begin())
{
    <div id="divGridProcessoSeletivoOferta">
        @Html.Action("ListarOfertasProcessoSeletivo", Model)
    </div>

    @Smc.HiddenFor(m => m.SeqProcessoSeletivo)
    @Smc.HiddenFor(m => m.SeqCampanha)
    @(Smc.ButtonSet()

                // CONFIGURAR VAGAS
                .AddButton(Smc.Button(SMCButtonBehavior.Configurar)
                        .CssClass("smc-btn-alterar-icotext-destaque")
                        .Text(Smc.GetUIResource("Botao_ConfigurarVagas"))
                        .Attribute("id", "btnConfigVaga")
                        .Action("ConfigurarVagas", "ProcessoSeletivoOferta")
                        .Type(SMCButtonType.Submit)
                        .Enabled(false)
                        .Conditional(SMCConditionalBehavior.ReadOnly, "gridListaOfertasProcessoSeletivo_Grid", SMCConditionalOperation.Equals, false))

                // COPIAR VAGAS
                .AddButton(Smc.Button(SMCMvcConsts.MODAL_BEHAVIOR_OPEN)
                        .Attribute(SMCMvcConsts.MODAL_ID, "modalCopiarVagas")
                        .Attribute("id", "btnCopiarVagas")
                        .Enabled(false)
                        .Conditional(SMCConditionalBehavior.ReadOnly, "gridListaOfertasProcessoSeletivo_Grid", SMCConditionalOperation.Equals, false)
                        .Text(Smc.GetUIResource("Botao_CopiarVagas"))
                        .Tooltip(Smc.GetUIResource("Botao_CopiarVagas"))
                        .Ajax(isPost: true, fieldsContainerToRequest: "#formOferta")
                        .CssClass("smc-btn-alterar-icotext-destaque")
                        .Url(Url.Action("ConfirmarCopiarVagasCampanha", "ProcessoSeletivoOferta")))

                 // USAR VAGAS DISPONÍVEIS
                 .AddButton(Smc.Button(SMCMvcConsts.MODAL_BEHAVIOR_OPEN)
                        .Attribute(SMCMvcConsts.MODAL_ID, "modalVagasDisponiveis")
                        .Attribute("id", "btnVagasDispiniveis")
                        .Enabled(false)
                        .Conditional(SMCConditionalBehavior.ReadOnly, "gridListaOfertasProcessoSeletivo_Grid", SMCConditionalOperation.Equals, false)
                        .Text(Smc.GetUIResource("Botao_VagasDisponiveis"))
                        .Tooltip(Smc.GetUIResource("Botao_VagasDisponiveis"))
                        .Ajax(isPost: true, fieldsContainerToRequest: "#formOferta")
                        .CssClass("smc-btn-alterar-icotext-destaque")
                        .Url(Url.Action("ConfirmarVagasDisponiveis", "ProcessoSeletivoOferta")))

                 // VOLTAR
                 .AddButton(Smc.Button("Voltar")
                        .CssClass("smc-btn-voltar-icotext")
                        .Action("Index", "ProcessoSeletivo", new { seqCampanha = (SMCEncryptedLong)Model.SeqCampanha })
                        .Type(SMCButtonType.Link))
    )
}

@* MODAL COPIAR VAGAS DA OFERTA DA CAMPANHA *@
@using (Smc.ModalWindow("modalCopiarVagas")
        .Title(Smc.GetUIResource("MSG_ConfirmarCopiarVagasOfertaCampanha"))
        .Size(SMCModalWindowSize.Large)
        .Form("SalvarCopia", "CopiarVagasCampanha", "ProcessoSeletivoOferta", null, true)
        .Button(SMCButtonBehavior.Salvar, config: btn => btn
            .Text(Smc.GetUIResource("Botao_Confirmar_Copiar_Vagas_Processo_Seletivo_Oferta_Campanha"))
            .Tooltip(Smc.GetUIResource("Botao_Confirmar_Copiar_Vagas_Processo_Seletivo_Oferta_Campanha_Tooltip"))
            .CssClass("smc-btn-salvar-icotext-destaque")
            .DisplayMode(SMCButtonDisplayMode.TextAndIcon))
        .Button(SMCButtonBehavior.Fechar, config: bnt => bnt
            .DisplayMode(SMCButtonDisplayMode.TextAndIcon)
            .CssClass("smc-btn-voltar-icotext")
            .Text(Smc.GetUIResource("Botao_Cancelar_Copiar_Vagas_Processo_Seletivo_Oferta_Campanha"))
            .Tooltip(Smc.GetUIResource("Botao_Cancelar_Copiar_Vagas_Processo_Seletivo_Oferta_Campanha_Tooltip")))
        .Begin()) { }

@* MODAL SALVAR VAGAS DISPONÍVEIS DA OFERTA DA CAMPANHA *@
@using (Smc.ModalWindow("modalVagasDisponiveis")
        .Title(Smc.GetUIResource("MSG_ConfirmarVagasDisponiveis"))
        .Size(SMCModalWindowSize.Large)
        .Form("VagasDisponiveis", "UsarVagasDisponiveis", "ProcessoSeletivoOferta", null, true)
        .Button(SMCButtonBehavior.Salvar, config: btn => btn
            .Text(Smc.GetUIResource("Botao_Confirmar_Vagas_Disponiveis"))
            .Tooltip(Smc.GetUIResource("Botao_Confirmar_Vagas_Disponiveis_Tooltip"))
            .CssClass("smc-btn-salvar-icotext-destaque")
            .DisplayMode(SMCButtonDisplayMode.TextAndIcon))
        .Button(SMCButtonBehavior.Fechar, config: bnt => bnt
            .DisplayMode(SMCButtonDisplayMode.TextAndIcon)
            .CssClass("smc-btn-voltar-icotext")
            .Text(Smc.GetUIResource("Botao_Cancelar_Vagas_Disponiveis"))
            .Tooltip(Smc.GetUIResource("Botao_Cancelar_Vagas_Disponiveis_Tooltip")))
        .Begin()) { }

@section scripts
{
    @* Reseta o conditional dos botões com prefixo "btn" ao efetuar um novo filtro *@
    <script src="@Url.SMCBuscarRecursoGlobalAplicacao("Scripts/Areas/CAM/Index.js")" type="text/javascript"></script>
}